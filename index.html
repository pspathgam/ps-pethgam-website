<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Government School Management App - No Fee Module</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 8px 32px rgba(31,38,135,0.37); }
        .header h1 { color: #4a5568; text-align: center; }
        nav { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 10px; }
        button, .nav-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 50px; cursor: pointer; transition: all 0.3s; font-weight: 600; }
        button:hover, .nav-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .section { display: none; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); padding: 30px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 8px 32px rgba(31,38,135,0.37); }
        .section.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e2e8f0; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        input, select, textarea { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #e2e8f0; border-radius: 8px; box-sizing: border-box; }
        .form-group { margin-bottom: 15px; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); }
        .modal-content { background: white; margin: 5% auto; padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto; animation: slideIn 0.3s; }
        @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { color: #000; }
        .btn-group { display: flex; gap: 10px; flex-wrap: wrap; }
        .success { background: #48bb78; color: white; padding: 10px; border-radius: 8px; margin: 10px 0; }
        .today-att { font-weight: bold; color: #667eea; }
        @media (max-width: 768px) { .container { padding: 10px; } nav { flex-direction: column; align-items: center; } table { font-size: 14px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè´ Government School Management System</h1>
            <p>Full-featured app for attendance, students, staff, exams & reports (No Fee Management)</p>
            <nav id="nav">
                <button class="nav-btn" onclick="showSection('dashboard')">Dashboard</button>
                <button class="nav-btn" onclick="showSection('students')">Students</button>
                <button class="nav-btn" onclick="showSection('staff')">Staff</button>
                <button class="nav-btn" onclick="showSection('attendance')">Attendance</button>
                <button class="nav-btn" onclick="showSection('exams')">Exams</button>
                <button class="nav-btn" onclick="showSection('timetable')">Timetable</button>
                <button class="nav-btn" onclick="showSection('reports')">Reports</button>
            </nav>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="section active">
            <h2>üìä Quick Stats</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                <div class="card" style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; text-align: center;">
                    <h3>Total Students</h3><span id="totalStudents" class="today-att">0</span>
                </div>
                <div class="card" style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; text-align: center;">
                    <h3>Total Staff</h3><span id="totalStaff" class="today-att">0</span>
                </div>
                <div class="card" style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; text-align: center;">
                    <h3>Today's Attendance</h3><span id="todayAttendance" class="today-att">0%</span>
                </div>
            </div>
            <button onclick="exportData('all')" style="margin-top: 20px;">üì§ Export All Data (CSV)</button>
        </div>

        <!-- Students Section -->
        <div id="students" class="section">
            <h2>üë• Student Management</h2>
            <div class="btn-group">
                <button onclick="openModal('addStudent')">‚ûï Add Student</button>
                <button onclick="bulkImportStudents()">üì• Bulk Import</button>
            </div>
            <table id="studentTable">
                <thead><tr><th>ID</th><th>Name</th><th>Class</th><th>DOB</th><th>Parent</th><th>Actions</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Staff Section -->
        <div id="staff" class="section">
            <h2>üë®‚Äçüè´ Staff Management</h2>
            <div class="btn-group">
                <button onclick="openModal('addStaff')">‚ûï Add Staff</button>
            </div>
            <table id="staffTable">
                <thead><tr><th>ID</th><th>Name</th><th>Role</th><th>Phone</th><th>Subject</th><th>Actions</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Attendance Section -->
        <div id="attendance" class="section">
            <h2>üìÖ Attendance</h2>
            <select id="classFilter" onchange="filterAttendance()"><option>All Classes</option></select>
            <div class="btn-group">
                <button onclick="markBulkAttendance('present')">‚úÖ Mark All Present</button>
                <button onclick="markBulkAttendance('absent')">‚ùå Mark All Absent</button>
                <button onclick="openModal('todayAttendance')">üìù Today's Sheet</button>
            </div>
            <table id="attendanceTable">
                <thead><tr><th>Name</th><th>Class</th><th>Date</th><th>Status</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Exams Section -->
        <div id="exams" class="section">
            <h2>üìö Exams & Results</h2>
            <div class="btn-group">
                <button onclick="openModal('addExam')">‚ûï New Exam</button>
                <button onclick="generateResults()">üìä Generate Results</button>
            </div>
            <table id="examTable">
                <thead><tr><th>Exam Name</th><th>Date</th><th>Class</th><th>Actions</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Timetable Section -->
        <div id="timetable" class="section">
            <h2>‚è∞ Timetable</h2>
            <button onclick="openModal('addPeriod')">‚ûï Add Period</button>
            <div id="timetableGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; margin-top: 20px;"></div>
        </div>

        <!-- Reports Section -->
        <div id="reports" class="section">
            <h2>üìã Reports</h2>
            <div class="btn-group">
                <button onclick="printAttendanceReport()">üñ®Ô∏è Attendance Report</button>
                <button onclick="printStudentReport()">üñ®Ô∏è Student List</button>
                <button onclick="exportData('reports')">üì§ CSV Reports</button>
            </div>
            <div id="reportPreview"></div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // Data Storage
        let students = JSON.parse(localStorage.getItem('students')) || [];
        let staff = JSON.parse(localStorage.getItem('staff')) || [];
        let attendance = JSON.parse(localStorage.getItem('attendance')) || [];
        let exams = JSON.parse(localStorage.getItem('exams')) || [];
        let timetable = JSON.parse(localStorage.getItem('timetable')) || {};
        let nextStudentId = parseInt(localStorage.getItem('nextStudentId')) || 1;
        let nextStaffId = parseInt(localStorage.getItem('nextStaffId')) || 1;

        // Save data
        function saveData() {
            localStorage.setItem('students', JSON.stringify(students));
            localStorage.setItem('staff', JSON.stringify(staff));
            localStorage.setItem('attendance', JSON.stringify(attendance));
            localStorage.setItem('exams', JSON.stringify(exams));
            localStorage.setItem('timetable', JSON.stringify(timetable));
            localStorage.setItem('nextStudentId', nextStudentId);
            localStorage.setItem('nextStaffId', nextStaffId);
            updateDashboard();
        }

        // Section Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            if (sectionId === 'students') renderStudents();
            if (sectionId === 'staff') renderStaff();
            if (sectionId === 'attendance') renderAttendance();
            if (sectionId === 'exams') renderExams();
            if (sectionId === 'timetable') renderTimetable();
        }

        // Dashboard Update
        function updateDashboard() {
            document.getElementById('totalStudents').textContent = students.length;
            document.getElementById('totalStaff').textContent = staff.length;
            const today = new Date().toISOString().split('T')[0];
            const todayAtt = attendance.filter(a => a.date === today);
            const present = todayAtt.filter(a => a.status === 'present').length;
            const totalToday = students.length || 1;
            document.getElementById('todayAttendance').textContent = Math.round((present / totalToday) * 100) + '%';
        }

        // Students
        function renderStudents() {
            const tbody = document.querySelector('#studentTable tbody');
            tbody.innerHTML = students.map(s => `
                <tr>
                    <td>${s.id}</td>
                    <td>${s.name}</td>
                    <td>${s.class}</td>
                    <td>${s.dob}</td>
                    <td>${s.parent}</td>
                    <td>
                        <button onclick="editStudent(${s.id})">Edit</button>
                        <button onclick="deleteStudent(${s.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function openModal(type) {
            const modal = document.getElementById('modal');
            const body = document.getElementById('modalBody');
            if (type === 'addStudent') {
                body.innerHTML = `
                    <h3>Add New Student</h3>
                    <div class="form-group"><input id="sName" placeholder="Full Name"></div>
                    <div class="form-group"><input id="sClass" placeholder="Class (e.g., 1A)"></div>
                    <div class="form-group"><input id="sDob" type="date" placeholder="Date of Birth"></div>
                    <div class="form-group"><input id="sParent" placeholder="Parent Name"></div>
                    <div class="btn-group"><button onclick="saveStudent()">Save</button><button onclick="closeModal()">Cancel</button></div>
                `;
            } else if (type === 'addStaff') {
                body.innerHTML = `
                    <h3>Add New Staff</h3>
                    <div class="form-group"><input id="stName" placeholder="Full Name"></div>
                    <div class="form-group"><input id="stRole" placeholder="Role (e.g., Teacher)"></div>
                    <div class="form-group"><input id="stPhone" placeholder="Phone"></div>
                    <div class="form-group"><input id="stSubject" placeholder="Subject"></div>
                    <div class="btn-group"><button onclick="saveStaff()">Save</button><button onclick="closeModal()">Cancel</button></div>
                `;
            } // Add more modals similarly...
            modal.style.display = 'block';
        }

        function saveStudent() {
            const student = {
                id: nextStudentId++,
                name: document.getElementById('sName').value,
                class: document.getElementById('sClass').value,
                dob: document.getElementById('sDob').value,
                parent: document.getElementById('sParent').value
            };
            students.push(student);
            saveData();
            renderStudents();
            closeModal();
            showAlert('Student added successfully!');
        }

        // Similar functions for staff, attendance, etc. (abbreviated for brevity)
        function saveStaff() {
            const staffMember = {
                id: nextStaffId++,
                name: document.getElementById('stName').value,
                role: document.getElementById('stRole').value,
                phone: document.getElementById('stPhone').value,
                subject: document.getElementById('stSubject').value
            };
            staff.push(staffMember);
            saveData();
            renderStaff();
            closeModal();
            showAlert('Staff added successfully!');
        }

        function renderStaff() {
            const tbody = document.querySelector('#staffTable tbody');
            tbody.innerHTML = staff.map(s => `
                <tr>
                    <td>${s.id}</td>
                    <td>${s.name}</td>
                    <td>${s.role}</td>
                    <td>${s.phone}</td>
                    <td>${s.subject}</td>
                    <td>
                        <button onclick="editStaff(${s.id})">Edit</button>
                        <button onclick="deleteStaff(${s.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Attendance functions
        function renderAttendance() {
            const today = new Date().toISOString().split('T')[0];
            const attData = attendance.filter(a => a.date === today).map(a => {
                const student = students.find(s => s.id == a.studentId);
                return { name: student ? student.name : 'Unknown', class: student ? student.class : '', date: a.date, status: a.status };
            });
            const tbody = document.querySelector('#attendanceTable tbody');
            tbody.innerHTML = attData.map(a => `<tr><td>${a.name}</td><td>${a.class}</td><td>${a.date}</td><td>${a.status}</td></tr>`).join('');
        }

        function markBulkAttendance(status) {
            const today = new Date().toISOString().split('T')[0];
            students.forEach(s => {
                const existing = attendance.find(a => a.studentId === s.id && a.date === today);
                if (!existing) {
                    attendance.push({ studentId: s.id, date: today, status });
                } else {
                    existing.status = status;
                }
            });
            saveData();
            renderAttendance();
            showAlert('Bulk attendance updated!');
        }

        // Exams (similar structure)
        function renderExams() {
            const tbody = document.querySelector('#examTable tbody');
            tbody.innerHTML = exams.map(e => `
                <tr>
                    <td>${e.name}</td>
                    <td>${e.date}</td>
                    <td>${e.class}</td>
                    <td><button onclick="viewResults('${e.id}')">Results</button></td>
                </tr>
            `).join('');
        }

        // Timetable (grid example)
        function renderTimetable() {
            const grid = document.getElementById('timetableGrid');
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const periods = ['9-10', '10-11', '11-12', '12-1', '2-3', '3-4'];
            grid.innerHTML = '';
            days.forEach(day => {
                const col = document.createElement('div');
                col.style.border = '1px solid #e2e8f0';
                col.style.padding = '10px';
                col.innerHTML = `<strong>${day}</strong>`;
                periods.forEach(period => {
                    col.innerHTML += `<div style="padding:5px;border-top:1px solid #e2e8f0;">${timetable[`${day}-${period}`] || 'Free'}</div>`;
                });
                grid.appendChild(col);
            });
        }

        // Utility Functions
        function closeModal() { document.getElementById('modal').style.display = 'none'; }
        function showAlert(msg) {
            const alert = document.createElement('div');
            alert.className = 'success';
            alert.textContent = msg;
            document.querySelector('.container').prepend(alert);
            setTimeout(() => alert.remove(), 3000);
        }
        function exportData(type) {
            let data = [];
            if (type === 'all') data = [...students, ...staff, ...attendance];
            const csv = 'data:text/csv;charset=utf-8,' + data.map(row => Object.values(row).join(',')).join('
');
            const encodedUri = encodeURI(csv);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', `school_data_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        function printReport(title, content) {
            const printWin = window.open('', '', 'height=600,width=800');
            printWin.document.write(`<h1>${title}</h1><pre>${content}</pre>`);
            printWin.document.close();
            printWin.print();
        }

        // Init
        updateDashboard();
        renderStudents();
        renderStaff();
        renderAttendance();
        renderExams();
        renderTimetable();
    </script>
</body>
</html>
                     
